# 概要设计说明书

## 总述

本程序做考核用，需要实现以下目标：

1. 能够对一段文本进行加密，并在界面显示出来；
2. 能够对密文进行解密，并在界面显示出来
3. 能从普通文件中读取多行文本，加密后再写入到文件中；
4. 能从Excel文件中批量读取明文，加密后再写入到Excel文件中；
5. 使用Material Design优化界面

开发工具使用Android Studio，测试用机为SAMSUNG S5。

## 总体设计

程序分为两个模块，app模块和encryption模块；

### 模块设计

#### app模块

本模块主要是上述目标的高层实现，实现了视图的呈现、与用户的交互以及实际的业务；

本模块均采用了MVP的设计模式，MVP是由经典的模式MVC演变而来，它们的基本思想有相通的地方：Controller/Presenter负责逻辑的处理，Model提供数据，View负责显示。

同MVC模式不同的是，MVP设计模式中View并不直接使用Model，它们之间的通信是通过Presenter (MVC中的Controller)来进行的，所有的交互都发生在Presenter内部，而在MVC中View会直接从Model中读取数据而不是通过 Controller。

具体区别请看图例：

![](http://cdn.nextto.top/MVP.png)

​                                                                                             图 1.1 MVP 设计模式简例



![](https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=bbbc461aadd3fd1f2204aa6851274e7a/e824b899a9014c085731fd910f7b02087bf4f4f8.jpg)

​                                                                                           图 1.2 MVC设计模式简例



优点：

1. 模型与视图完全分离，我们可以修改视图而不影响模型
2. 可以更高效地使用模型，因为所有的交互都发生在一个地方——Presenter内部
3. 我们可以将一个Presenter用于多个视图，而不需要改变Presenter的逻辑。这个特性非常的有用，因为视图的变化总是比模型的变化频繁。
4. 如果我们把逻辑放在Presenter中，那么我们就可以脱离用户接口来测试这些逻辑（单元测试）

缺点：

1. 对视图的渲染全放在了Presenter中，所以View和Presenter之间的交互会过于频繁。
2. 同样一旦视图变更，Presenter也有可能变更。

#### encryption模块

本模块实现底层的加密解密工作，大体上分为两个部分，实现加密解密功能和对外提供调用；

##### 实现

主要实现是由下面三个类负责：

![](http://cdn.nextto.top/TIM%E6%88%AA%E5%9B%BE20190318100200.png)

​                                                              图 1.3 加密解密实现

其中`Base64Encoder`和`Base64Decoder`是将输入转化成字节流，然后在`AesUtils`中进行具体的加密解密工作。

##### 对外提供调用

对外提供调用主要由下面三个文件负责：

![](http://cdn.nextto.top/TIM%E6%88%AA%E5%9B%BE20190318101141.png)

​                                                               图 1.4 对外提供调用

其中`EncryptionImpl`定义了对外调用的接口，`EncryptionManager`实现了此接口，与此同时`Md5Utils`和`AesUtils`在`EncryptionManager`具体实现接口发挥了重要作用。

